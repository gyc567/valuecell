# ValueCell 新手入门手册 📚

欢迎来到 ValueCell！这是一个专为金融投资打造的多智能体平台。本手册将用最简单的语言，帮助你从零开始了解和使用这个项目。

## 🤔 什么是 ValueCell？

想象一下，你有一个专业的投资顾问团队，每个顾问都有不同的专长：
- 有的擅长分析股票基本面
- 有的专门研究市场情绪
- 有的关注新闻动态
- 有的负责监控监管信息

ValueCell 就是这样一个"数字投资顾问团队"，由多个 AI 智能体组成，它们协同工作，为你提供全方位的投资分析和建议。

## 🏗️ 项目整体架构

ValueCell 采用前后端分离的架构，就像一个餐厅：

```
前端 (React + TypeScript)  ←→  后端 (Python + FastAPI)  ←→  各种智能体
    用户界面                    核心逻辑                   AI 分析师们
```

### 主要组成部分：

1. **前端界面** (`frontend/`)
   - 使用 React 19 + TypeScript 构建
   - 提供现代化的 Web 界面
   - 支持实时聊天和数据可视化

2. **后端服务** (`python/`)
   - 使用 Python 3.12+ 和 FastAPI 框架
   - 负责协调各个智能体
   - 处理数据存储和 API 接口

3. **智能体系统**
   - 多个专业的 AI 智能体
   - 每个智能体有特定的金融分析能力
   - 通过 A2A (Agent-to-Agent) 协议通信

## 🎯 核心功能

### 1. 多智能体协作
- **Trading Agents**: 市场分析、情绪分析、新闻分析、基本面分析
- **AI-Hedge-Fund**: 智能体协作提供综合金融洞察
- **SEC Agent**: 实时监控美国证券交易委员会信息
- **Research Agent**: 深度研究和分析

### 2. 灵活的集成能力
- **多种 AI 模型**: 支持 OpenRouter、OpenAI、Anthropic、Google、Ollama
- **丰富的市场数据**: 美股、加密货币、港股、A股等
- **框架兼容**: 支持 Langchain、Agno 等主流 Agent 框架

## 🛠️ 技术栈详解

### 前端技术栈
```json
{
  "核心框架": "React 19 + TypeScript",
  "路由": "React Router v7",
  "状态管理": "Zustand",
  "UI组件": "Radix UI + Tailwind CSS",
  "数据请求": "TanStack Query",
  "图表": "ECharts",
  "构建工具": "Vite + Bun",
  "代码规范": "Biome"
}
```

### 后端技术栈
```python
{
    "核心框架": "FastAPI + Uvicorn",
    "Python版本": "3.12+",
    "数据库": "SQLite + SQLAlchemy",
    "AI框架": "Agno + LangChain",
    "数据源": "yfinance + akshare + edgartools",
    "异步处理": "asyncio + aiofiles",
    "日志": "loguru",
    "爬虫": "crawl4ai"
}
```

## 📁 项目结构详解

```
valuecell/
├── frontend/                    # 前端代码
│   ├── src/
│   │   ├── app/                # 页面组件
│   │   ├── components/         # 可复用组件
│   │   ├── api/               # API 接口
│   │   ├── store/             # 状态管理
│   │   └── types/             # TypeScript 类型定义
│   ├── package.json           # 前端依赖配置
│   └── vite.config.ts         # 构建配置
│
├── python/                     # 后端代码
│   ├── valuecell/
│   │   ├── core/              # 核心架构
│   │   │   ├── orchestrator/  # 任务编排器
│   │   │   ├── planner/       # 计划制定器
│   │   │   └── response/      # 响应处理
│   │   ├── agents/            # 智能体实现
│   │   │   ├── research_agent/     # 研究智能体
│   │   │   └── auto_trading_agent/ # 交易智能体
│   │   ├── server/            # Web 服务器
│   │   └── utils/             # 工具函数
│   ├── pyproject.toml         # Python 项目配置
│   └── scripts/               # 启动脚本
│
├── .env.example               # 环境变量模板
├── start.sh                   # 启动脚本 (Linux/Mac)
├── start.ps1                  # 启动脚本 (Windows)
└── README.md                  # 项目说明
```

## 🚀 快速开始

### 第一步：环境准备

你需要安装以下工具：

1. **Python 3.12+**
   ```bash
   # 检查 Python 版本
   python --version
   ```

2. **uv** (Python 包管理器)
   ```bash
   # macOS/Linux
   curl -LsSf https://astral.sh/uv/install.sh | sh
   
   # Windows
   powershell -c "irm https://astral.sh/uv/install.ps1 | iex"
   ```

3. **bun** (JavaScript 运行时)
   ```bash
   # macOS/Linux
   curl -fsSL https://bun.sh/install | bash
   
   # Windows
   powershell -c "irm bun.sh/install.ps1 | iex"
   ```

### 第二步：获取代码

```bash
# 克隆项目
git clone https://github.com/ValueCell-ai/valuecell.git
cd valuecell
```

### 第三步：配置环境变量

```bash
# 复制环境变量模板
cp .env.example .env
```

然后编辑 `.env` 文件，填入你的 API 密钥：

```bash
# 主要的 AI 模型提供商 (推荐使用 OpenRouter)
OPENROUTER_API_KEY=你的_OpenRouter_密钥

# SEC 数据需要邮箱 (必填)
SEC_EMAIL=your-email@example.com

# 可选：其他 API 密钥
OPENAI_API_KEY=你的_OpenAI_密钥
FINNHUB_API_KEY=你的_Finnhub_密钥
```

### 第四步：启动项目

```bash
# Linux/macOS
bash start.sh

# Windows PowerShell
.\start.ps1
```

启动脚本会自动：
1. 检查并安装缺失的工具
2. 安装前后端依赖
3. 初始化数据库
4. 启动前端和后端服务

### 第五步：访问应用

打开浏览器，访问：http://localhost:1420

## 🔧 开发指南

### 前端开发

```bash
cd frontend

# 安装依赖
bun install

# 启动开发服务器
bun run dev

# 代码检查和格式化
bun run check:fix
```

### 后端开发

```bash
cd python

# 安装依赖
uv sync

# 启动后端服务
uv run scripts/launch.py

# 运行测试
uv run pytest

# 代码格式化
make format
```

## 🤖 智能体系统详解

### 核心架构

ValueCell 使用了先进的多智能体协作架构：

1. **编排器 (Orchestrator)**
   - 协调用户输入和智能体响应
   - 支持异步和可重入操作
   - 处理流式响应

2. **计划器 (Planner)**
   - 将用户意图转换为可执行计划
   - 支持人机交互确认
   - 智能选择合适的智能体

3. **A2A 协议**
   - Agent-to-Agent 通信协议
   - 支持远程智能体调用
   - 位置透明的智能体交互

### 智能体类型

1. **研究智能体 (Research Agent)**
   - 深度市场研究
   - 公司基本面分析
   - 行业趋势分析

2. **交易智能体 (Trading Agent)**
   - 技术分析
   - 交易信号生成
   - 风险管理

3. **SEC 智能体 (SEC Agent)**
   - 监管文件监控
   - 实时信息推送
   - 合规性分析

## 📊 数据源和集成

### 支持的数据源

1. **股票数据**
   - yfinance: 免费的雅虎财经数据
   - akshare: 中国市场数据
   - 雪球网: 实时行情数据

2. **新闻和情绪**
   - Finnhub: 金融新闻和情绪分析
   - crawl4ai: 网页内容抓取

3. **监管信息**
   - edgartools: SEC 文件解析
   - 实时监管公告

### AI 模型集成

支持多种 AI 模型提供商：

```python
# 模型配置示例
PLANNER_MODEL_ID=google/gemini-2.5-flash
SEC_ANALYSIS_MODEL_ID=deepseek/deepseek-chat-v3-0324
RESEARCH_AGENT_MODEL_ID=google/gemini-2.5-flash
```

## 🔒 安全和配置

### API 密钥管理

- 所有敏感信息存储在 `.env` 文件中
- 支持多种认证方式
- 自动密钥轮换（企业版功能）

### 数据隐私

- 本地数据存储
- 可选的云端同步
- 符合金融数据合规要求

## 🐛 常见问题解决

### 1. 启动失败

**问题**: `command not found: uv` 或 `command not found: bun`

**解决**: 确保正确安装了 uv 和 bun，并重新加载终端环境

```bash
# 重新加载环境变量
source ~/.bashrc  # 或 ~/.zshrc
```

### 2. API 密钥错误

**问题**: `Invalid API key` 错误

**解决**: 检查 `.env` 文件中的 API 密钥是否正确填写

### 3. 端口占用

**问题**: `Port 8000 already in use`

**解决**: 
```bash
# 查找占用端口的进程
lsof -i :8000

# 杀死进程
kill -9 <PID>
```

### 4. 依赖安装失败

**问题**: Python 或 Node.js 依赖安装失败

**解决**:
```bash
# 清理缓存重新安装
cd python && uv cache clean && uv sync
cd frontend && bun install --force
```

## 📈 进阶使用

### 自定义智能体

你可以创建自己的智能体：

```python
from valuecell.agents.decorator import agent

@agent(
    name="my_custom_agent",
    description="我的自定义智能体"
)
async def my_agent(query: str) -> str:
    # 你的智能体逻辑
    return f"处理查询: {query}"
```

### 扩展数据源

添加新的数据源：

```python
from valuecell.adapters import DataAdapter

class MyDataAdapter(DataAdapter):
    async def fetch_data(self, symbol: str):
        # 你的数据获取逻辑
        pass
```

## 🤝 社区和支持

### 获取帮助

- **GitHub Issues**: 报告 bug 和功能请求
- **Discord**: 实时社区讨论
- **文档**: 详细的 API 文档和教程

### 贡献代码

1. Fork 项目
2. 创建功能分支
3. 提交代码
4. 发起 Pull Request

### 开发规范

- 遵循 PEP 8 Python 代码规范
- 使用 TypeScript 严格模式
- 编写单元测试
- 更新文档

## 🎯 下一步

现在你已经了解了 ValueCell 的基本概念和使用方法，可以：

1. **探索界面**: 熟悉 Web 界面的各个功能
2. **尝试对话**: 与智能体进行投资相关的对话
3. **查看分析**: 体验各种金融分析功能
4. **自定义配置**: 根据需要调整智能体行为
5. **参与社区**: 加入 Discord 与其他用户交流

记住，ValueCell 是一个不断发展的项目，新功能和改进会持续推出。保持关注项目更新，享受 AI 驱动的投资分析体验！

---

**提示**: 如果你在使用过程中遇到任何问题，不要犹豫，随时在 GitHub Issues 或 Discord 中寻求帮助。社区很乐意协助新用户！